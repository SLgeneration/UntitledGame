[gd_scene load_steps=13 format=2]

[ext_resource path="res://assets/GUI/cash.png" type="Texture" id=1]
[ext_resource path="res://src/Helpers/GUI/HealthBar.tscn" type="PackedScene" id=2]
[ext_resource path="res://src/Actors/LirikYaki.tscn" type="PackedScene" id=3]
[ext_resource path="res://assets/Mogno/FAFA/Football.tscn" type="PackedScene" id=4]
[ext_resource path="res://src/Actors/SlimeFR.tscn" type="PackedScene" id=5]
[ext_resource path="res://assets/Mogno/FAFA/Football pitch.png" type="Texture" id=6]
[ext_resource path="res://src/Helpers/Camera/CustomDelimiter2D.tscn" type="PackedScene" id=7]
[ext_resource path="res://assets/SpriteSheets/falling_leaf_particle.png" type="Texture" id=8]

[sub_resource type="SegmentShape2D" id=2]
a = Vector2( -719.258, 3.29889 )
b = Vector2( 2699.4, 2.97202 )

[sub_resource type="LineShape2D" id=3]
normal = Vector2( 0.999999, 0.00122085 )

[sub_resource type="Shader" id=5]
code = "shader_type particles;

uniform vec4 color_1 : hint_color = vec4( 1.0 );
uniform vec4 color_2 : hint_color = vec4( 1.0 );
uniform vec4 color_3 : hint_color = vec4( 1.0 );
uniform vec4 color_4 : hint_color = vec4( 1.0 );

float rand_from_seed(inout uint seed) {
	int k;
	int s = int(seed);
	if (s == 0)
	s = 305420679;
	k = s / 127773;
	s = 16807 * (s - k * 127773) - 2836 * k;
	if (s < 0)
		s += 2147483647;
	seed = uint(s);
	return float(seed % uint(65536)) / 65535.0;
}

float rand_from_seed_m1_p1(inout uint seed) {
	return rand_from_seed(seed) * 2.0 - 1.0;
}

uint hash(uint x) {
	x = ((x >> uint(16)) ^ x) * uint(73244475);
	x = ((x >> uint(16)) ^ x) * uint(73244475);
	x = (x >> uint(16)) ^ x;
	return x;
}

void vertex() {
	uint base_number = NUMBER;
	uint alt_seed = hash(base_number + uint(1) + RANDOM_SEED);
	

	if (RESTART) 
	{
		TRANSFORM[3].x = rand_from_seed( alt_seed ) * 30.0 - 15.0;
		TRANSFORM[3].y = rand_from_seed( alt_seed ) * 30.0 - 15.0;
		VELOCITY.x = rand_from_seed( alt_seed ) * ( -10.0 );
		VELOCITY.y = rand_from_seed( alt_seed ) * ( 10.0 );
		
		int color_index = int( rand_from_seed( alt_seed ) * 4.0 );
		if( color_index == 0 )
		{
			COLOR = color_1;
		}
		else if( color_index == 1 )
		{
			COLOR = color_2;
		}
		else if( color_index == 2 )
		{
			COLOR = color_3;
		}
		else if( color_index == 3 )
		{
			COLOR = color_4;
		}
	} 
	else
	{
		CUSTOM.x += DELTA;
		TRANSFORM[0] = vec4(cos(CUSTOM.x), -sin(CUSTOM.x), 0.0, 0.0);
		TRANSFORM[1] = vec4(sin(CUSTOM.x), cos(CUSTOM.x), 0.0, 0.0);
	}
}

"

[sub_resource type="ShaderMaterial" id=4]
shader = SubResource( 5 )
shader_param/color_1 = Color( 1, 0, 0.368627, 1 )
shader_param/color_2 = Color( 0.282353, 1, 0, 1 )
shader_param/color_3 = Color( 0, 0.666667, 1, 1 )
shader_param/color_4 = Color( 1, 0.87451, 0, 1 )

[node name="Node2D" type="Node2D"]

[node name="Level Background" type="Sprite" parent="."]
position = Vector2( 1775.98, 269.695 )
scale = Vector2( 0.500564, 0.500564 )
z_index = -5
texture = ExtResource( 6 )

[node name="Boundaries" type="Node" parent="Level Background"]

[node name="Universal" type="StaticBody2D" parent="Level Background/Boundaries"]
position = Vector2( 240.006, 305.733 )
scale = Vector2( 0.497642, 0.497642 )

[node name="top_border" type="CollisionShape2D" parent="Level Background/Boundaries/Universal"]
position = Vector2( 966.259, -548.225 )
scale = Vector2( 2.00948, 2.00948 )
shape = SubResource( 2 )

[node name="bottom_border" type="CollisionShape2D" parent="Level Background/Boundaries/Universal"]
position = Vector2( 966.259, 415.236 )
scale = Vector2( 2.00948, 2.00948 )
shape = SubResource( 2 )

[node name="left_border" type="CollisionShape2D" parent="Level Background/Boundaries/Universal"]
position = Vector2( -479.329, -228.659 )
scale = Vector2( 2.00948, 8.8417 )
shape = SubResource( 3 )

[node name="right_border" type="CollisionShape2D" parent="Level Background/Boundaries/Universal"]
position = Vector2( 5802.69, -175.013 )
rotation = -0.764922
scale = Vector2( 2.00948, 8.8417 )
shape = SubResource( 3 )

[node name="CameraPositions" type="Node" parent="Level Background"]

[node name="Bathroom_Delimiter" parent="Level Background/CameraPositions" instance=ExtResource( 7 )]
position = Vector2( 6.972, 50 )

[node name="Node2D" type="Node2D" parent="Level Background"]
position = Vector2( -3547.96, -538.782 )
scale = Vector2( 1.99775, 1.99775 )

[node name="Particles2D" type="Particles2D" parent="Level Background/Node2D"]
position = Vector2( 822.053, -111.237 )
scale = Vector2( 3, 3 )
amount = 120
lifetime = 20.0
preprocess = 60.0
process_material = SubResource( 4 )
texture = ExtResource( 8 )

[node name="Particles2D2" type="Particles2D" parent="Level Background/Node2D"]
position = Vector2( 2078.87, -215.036 )
scale = Vector2( 3, 3 )
amount = 120
lifetime = 20.0
preprocess = 60.0
process_material = SubResource( 4 )
texture = ExtResource( 8 )

[node name="Particles2D3" type="Particles2D" parent="Level Background/Node2D"]
position = Vector2( 2965.85, -169.678 )
scale = Vector2( 3, 3 )
amount = 120
lifetime = 20.0
preprocess = 60.0
process_material = SubResource( 4 )
texture = ExtResource( 8 )

[node name="YSort" type="YSort" parent="."]

[node name="Actors" type="YSort" parent="YSort"]

[node name="LirikYaki" parent="YSort/Actors" groups=[
"Player",
] instance=ExtResource( 3 )]
position = Vector2( 234.523, 251.754 )
scale = Vector2( 1, 1 )

[node name="Enemy" parent="YSort/Actors" instance=ExtResource( 5 )]
position = Vector2( 1223, 198.259 )
scale = Vector2( 0.5, 0.5 )

[node name="Enemy2" parent="YSort/Actors" instance=ExtResource( 5 )]
position = Vector2( 1333.18, 285.377 )
scale = Vector2( 0.5, 0.5 )

[node name="Enemy3" parent="YSort/Actors" instance=ExtResource( 5 )]
position = Vector2( 1140.62, 178.411 )
scale = Vector2( 0.5, 0.5 )

[node name="FOOTBALL" parent="YSort/Actors" instance=ExtResource( 4 )]
position = Vector2( 313.211, 234.841 )

[node name="GUI" type="CanvasLayer" parent="."]

[node name="Control" type="Control" parent="GUI"]
margin_right = 40.0
margin_bottom = 40.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="healthBar" parent="GUI/Control" instance=ExtResource( 2 )]
margin_left = 19.844
margin_top = 13.5186
margin_right = 222.844
margin_bottom = 34.5186

[node name="Cash" type="TextureRect" parent="GUI/Control"]
margin_left = 13.0
margin_top = 35.4645
margin_right = 124.0
margin_bottom = 55.4645
texture = ExtResource( 1 )
expand = true
__meta__ = {
"_edit_use_anchors_": false
}
